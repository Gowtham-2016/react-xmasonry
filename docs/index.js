!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports["react-xmasonry"]=t(require("React")):e["react-xmasonry"]=t(e.React)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),d=r(c),f=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),l(t,[{key:"render",value:function(){var e=this.props,n=(e.width,e.measured,e.style),r=o(e,["width","measured","style"]);return d.default.createElement("div",s({},r,{style:s({},n,t.defaultStyle),className:this.props.measured?"xblock":""}),this.props.children)}}]),t}(d.default.Component);f.defaultProps={width:1,measured:!1},f.defaultStyle={position:"absolute"},t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=r(l),d=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={blocks:{},containerHeight:0,columns:1,containerWidth:0},n.container=null,n.mounted=!1,n.resizeListener=null,n.debouncedResizeTimeout=0,n.debounceRate=50,n.fixedHeight=0,n.containerWidth=n.state.containerWidth,n.columns=n.state.columns,n.props.responsive&&window.addEventListener("resize",n.resizeListener=n.onResize.bind(n)),n.onResize(),n}return a(t,e),s(t,[{key:"getColumns",value:function(e){return Math.max(1,Math.round(e/this.props.targetBlockWidth))}},{key:"updateContainerWidth",value:function(){var e=this.container.getBoundingClientRect().width;return e===this.containerWidth||(this.setState({columns:this.columns=this.getColumns(e),containerWidth:this.containerWidth=e,blocks:{}}),!1)}},{key:"componentDidMount",value:function(){this.mounted=!0,this.updateContainerWidth()&&this.measureChildren()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.resizeListener&&window.removeEventListener("resize",this.resizeListener)}},{key:"componentWillReceiveProps",value:function(e){if(e.children.length<this.props.children.length){for(var t=new Set,n={},r=0;r<e.children.length;r++)t.add(e.children[r].key);for(var o=0;o<this.props.children.length;o++)t.has(this.props.children[o].key)||(n[this.props.children[o].key]={});this.recalculatePositions(null,n)}}},{key:"componentDidUpdate",value:function(){this.updateContainerWidth()&&this.measureChildren()}},{key:"measureChildren",value:function(){for(var e={},t=0;t<this.container.children.length;t++){var n=this.container.children[t];if(n.hasAttribute("data-xkey")){var r=n.getBoundingClientRect(),o=r.height;e[n.getAttribute("data-xkey")]={height:Math.ceil(o)}}}Object.keys(e).length>0&&this.recalculatePositions(e)}},{key:"recalculatePositions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=void 0,o=Array.from({length:this.columns},function(){return 0});if(n){r={};for(var i in this.state.blocks)this.state.blocks.hasOwnProperty(i)&&!n.hasOwnProperty(i)&&(r[i]=this.state.blocks[i]);for(var a in e)e.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(r[a]=e[a])}else r=u({},this.state.blocks,e);for(var s=0;s<this.container.children.length;s++){var l=this.container.children[s],c=l.getAttribute("data-key");if(r.hasOwnProperty(c)&&(!n||!n.hasOwnProperty(c))){var d=+l.getAttribute("data-width")||1,f=t.getBestFitColumn(o,d),h=f.col,y=f.height,m=y+r[c].height;r[c].left=this.containerWidth*h/this.columns,r[c].top=y;for(var p=0;p<d;++p)o[h+p]=m}}if(this.props.center&&0===o[o.length-1]){for(var b=1;0===o[o.length-1-b];++b);var v=this.containerWidth*b/this.columns/2;for(var g in r)r.hasOwnProperty(g)&&(r[g].left+=v)}this.setState({blocks:r,containerHeight:Math.max.apply(null,o)})}},{key:"onResize",value:function(){var e=this;if(this.mounted){if(this.debouncedResizeTimeout)return clearTimeout(this.debouncedResizeTimeout),void(this.debouncedResizeTimeout=setTimeout(function(){e.debouncedResizeTimeout=null,e.updateContainerWidth(e)},this.debounceRate));this.updateContainerWidth(),this.debouncedResizeTimeout=setTimeout(function(){return e.debouncedResizeTimeout=0},this.debounceRate)}}},{key:"render",value:function(){var e=this,n=0,r=Array.prototype.slice.call(this.props.children).map(function(t){var r=e.state.blocks[t.key],o=Math.min(t.props.width,e.columns);return r||++n,r?c.default.cloneElement(t,{"data-key":t.key,"data-width":o,style:{width:Math.floor(o*e.containerWidth/e.columns),height:r.height,left:Math.floor(r.left),top:r.top},measured:!0,width:o}):c.default.cloneElement(t,{"data-key":t.key,"data-width":o,"data-xkey":t.key,style:{width:Math.floor(o*e.containerWidth/e.columns),visibility:"hidden"},width:o})}),o=n?this.fixedHeight:this.fixedHeight=this.state.containerHeight;return c.default.createElement("div",{className:"xmasonry",style:u({},t.containerStyle,{height:o}),ref:function(t){return e.container=t}},r)}}],[{key:"getBestFitColumn",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=1/0,o=0;o<e.length-t+1;++o){var i=Math.max.apply(null,e.slice(o,o+t));i<r&&(r=i,n=o)}return{col:n,height:r}}}]),t}(c.default.Component);d.propTypes={center:c.default.PropTypes.bool,responsive:c.default.PropTypes.bool,targetBlockWidth:c.default.PropTypes.number},d.defaultProps={center:!0,responsive:!0,targetBlockWidth:300},d.containerStyle={position:"relative"},t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.XBlock=t.XMasonry=void 0;var o=n(2),i=r(o),a=n(1),u=r(a);t.XMasonry=i.default,t.XBlock=u.default,"undefined"!=typeof window&&(window.XMasonry=i.default,window.XBlock=u.default)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),c=o(l),d=n(3),f=n(5),h=r(f),y=[{id:1,header:"Good News",body:"This is the dummy body. This is successfully rendered card.",color:h.getRandomColor()},{id:2,header:"Cool Masonry",body:"This is the dummy body. This is successfully rendered card.",color:h.getRandomColor()},{id:3,header:"Layout is Here!",body:"This card takes 2 columns. This is successfully rendered card. This is successfully rendered card. This is successfully rendered card. This is successfully rendered card.",width:2,color:h.getRandomColor()}],m=function(e){function t(){var e,n,r,o;i(this,t);for(var u=arguments.length,s=Array(u),l=0;l<u;l++)s[l]=arguments[l];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={data:y},r.lastCardId=r.state.data.length,o=n,a(r,o)}return u(t,e),s(t,[{key:"addCard",value:function(){this.setState({data:this.state.data.concat(h.getRandomCard(++this.lastCardId))})}},{key:"deleteCard",value:function(){if(!(this.state.data.length<1)){var e=this.state.data.slice();e.splice(Math.floor(Math.random()*e.length),1),this.setState({data:e})}}},{key:"replaceCard",value:function(){if(!(this.state.data.length<1)){var e=this.state.data.slice();e.splice(Math.floor(Math.random()*e.length),1,h.getRandomCard(++this.lastCardId)),this.setState({data:e})}}},{key:"render",value:function(){return requestAnimationFrame(function(){return window.scrollTo(0,document.body.scrollHeight)}),c.default.createElement("div",null,c.default.createElement("h1",{style:{textAlign:"center"}},"Demo Cards"),c.default.createElement("div",{className:"sourceLinks"},c.default.createElement("a",{target:"_blank",href:"https://github.com/ZitRos/react-xmasonry/blob/master/docs/css/DemoCards.css"},"CSS source")," | ",c.default.createElement("a",{target:"_blank",href:"https://github.com/ZitRos/react-xmasonry/blob/master/docs/jsx/DemoCards.jsx"},"JavaScript source")),c.default.createElement(d.XMasonry,null,this.state.data.map(function(e,t){return c.default.createElement(d.XBlock,{key:e.id,width:e.width||1},c.default.createElement("div",{className:"card",style:{backgroundColor:e.color}},c.default.createElement("h1",null,e.header,c.default.createElement("sup",null,e.id)),c.default.createElement("p",null,e.body)))})),c.default.createElement("div",{style:{textAlign:"center"}},c.default.createElement("button",{onClick:this.addCard.bind(this)},"Add Random Card"),c.default.createElement("button",{onClick:this.deleteCard.bind(this)},"Delete random card"),c.default.createElement("button",{onClick:this.replaceCard.bind(this)},"Replace random card")))}}]),t}(c.default.Component);t.default=m},function(e,t,n){"use strict";function r(){var e=["#ffff8d","#ff8a80","#a7ffeb","#ffd180","#80d8ff","#ccff90","#cfd8dc"];return e[Math.floor(Math.random()*e.length)]}function o(e){return{id:e,header:"This is a dummy card",body:["This is a dummy body. Dummy body. Dummy body. Dummy body. Dummy body",". Dummy body. Dummy body. Dummy body. Dummy body. Dummy body",". Dummy body. Dummy body. Dummy body. Dummy body. Dummy body",". Dummy body. Dummy body. Dummy body. Dummy body. Dummy body.",". Dummy body. Dummy body. Dummy body. Dummy body. Dummy body.",". Dummy body. Dummy body. Dummy body. Dummy body. Dummy body."].slice(0,Math.floor(6*Math.random())+1),width:Math.floor(1+1.5*Math.random()),color:r()}}Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomColor=r,t.getRandomCard=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var o=n(4),i=r(o);window.init=function(){ReactDOM.render(React.createElement("div",null,React.createElement(i.default,null)),document.getElementById("demoApp"))}}])});